<form nz-form nzLayout="horizontal" [formGroup]="editForm">
  <div *ngFor="let question of questions;">
    <nz-form-item *ngIf="question.isEnum; else elseBlock">
      <nz-form-label [nzSpan]="8" nzNoColon>{{question.Description}}</nz-form-label>
      <nz-form-control [nzSpan]="14">
        <div *ngIf="question.isTags; else tagsBlock">
          <nz-select nzMode="tags" [nzDropdownMatchSelectWidth]="false" nzSize="small" nzShowSearch nzAllowClear [nzPlaceHolder]="question.Description" [formControlName]="question.id">
            <nz-option *ngFor="let select of question.Enum" [nzLabel]="select.N" [nzValue]="select.V"></nz-option>
          </nz-select>
<!--          穿梭框-->
<!--          <nz-transfer-->
<!--              [nzDataSource]="question.Enum"-->
<!--              nzShowSearch-->
<!--              [nzTitles]="['移除项', '选中项']"-->
<!--              [nzFilterOption]="filterOption"-->
<!--              (nzSearchChange)="search($event)"-->
<!--              (nzSelectChange)="select($event)"-->
<!--              (nzChange)="change($event, question.Enum)">-->
<!--          </nz-transfer>-->
        </div>
        <ng-template #tagsBlock>
          <nz-select [nzDropdownMatchSelectWidth]="false" nzSize="small" nzShowSearch nzAllowClear [nzPlaceHolder]="question.Description" [formControlName]="question.id">
            <nz-option *ngFor="let select of question.Enum" [nzLabel]="select.N" [nzValue]="select.V"></nz-option>
          </nz-select>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <ng-template #elseBlock>
      <nz-form-item [ngSwitch]="question.Type">
        <nz-form-label [nzSpan]="8" nzNoColon>{{question.Description}}</nz-form-label>
        <nz-form-control [nzSpan]="14" *ngSwitchCase="'string'">
          <input nz-input [formControlName]="question.id" [placeholder]="question.Description" [readonly]="question.id === 'ID' || (mode === 'edit' && question.Immutable)" nzSize="small">
        </nz-form-control>
        <nz-form-control [nzSpan]="14" *ngSwitchCase="'bytes'">
          <input nz-input [formControlName]="question.id" [placeholder]="question.Description" [readonly]="question.id === 'ID' || (mode === 'edit' && question.Immutable)" nzSize="small">
        </nz-form-control>
        <nz-form-control [nzSpan]="14" *ngSwitchCase="'bytes-bool'">
          <label nz-checkbox [formControlName]="question.id"></label>
        </nz-form-control>
        <nz-form-control [nzSpan]="14" *ngSwitchCase="'integer'">
          <nz-input-number [formControlName]="question.id" nzSize="small" [nzDisabled]="question.id === 'ID' || question.Immutable"></nz-input-number>
        </nz-form-control>
        <nz-form-control [nzSpan]="14" *ngSwitchCase="'object-textarea'">
          <textarea nz-input nzAutosize [formControlName]="question.id" [placeholder]="question.Description" [readonly]="question.id === 'ID' || (mode === 'edit' && question.Immutable)" nzSize="small"></textarea>
        </nz-form-control>
        <div *ngSwitchCase="'object'">
          <div *ngIf="question.Properties" app-common-form [selectList]="question.Enum" [questions]="question.Properties" [editForm]="editForm.get(question.id)" [mode]="mode"></div>
        </div>
        <div *ngSwitchCase="'array'">
          <div app-common-form [editForm]="getFormArray(question.id, question).at(0)" [mode]="mode" [selectList]="question.Items.Enum" [questions]="question.Items.Properties"></div>
<!--          <div [formArrayName]="getFormArray(question.id, question)">-->
<!--            <div *ngFor="let num of question.arrItems; let i = index">-->
<!--              <div *ngFor="let q of num.Properties">-->
<!--                <nz-form-item>-->
<!--                  <nz-form-label [nzSpan]="8">{{q.Description}}</nz-form-label>-->
<!--                  <nz-form-control [nzSpan]="14">-->
<!--                    <input nz-input [formControlName]="q.id" [placeholder]="q.Description" nzSize="small">-->
<!--                  </nz-form-control>-->
<!--                </nz-form-item>-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->
        </div>
      </nz-form-item >
    </ng-template>
  </div>
</form>
